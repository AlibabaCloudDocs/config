# 新建规则

规则的本质是放在函数计算的函数中的逻辑判断代码，您可以引用配置审计为您准备的托管规则，也可以在函数计算中自定义规则函数。您还可以将需求通过工单提交给阿里云售后工程师，评估后有机会实现为托管规则。

在新建规则之前，请您先了解[规则的定义及运行原理](/cn.zh-CN/资源合规审计/规则的定义及运行原理.md)。

## 通过托管规则新建规则

使用函数计算已开发的规则函数，快速新建规则，请参见[托管规则列表](/cn.zh-CN/资源合规审计/托管规则/托管规则列表.md)。

1.  登录[配置审计控制台](https://config.console.aliyun.com)。

2.  在左侧导航栏，选择**管理合规规则**。

3.  在**管理合规规则**页面，单击**新建规则**。

4.  在**基本设置**页面，选择**规则配置方式**为**使用托管规则**，选择**托管规则**和**风险等级**，单击**下一步**。

    ![标签](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/8479670061/p86601.png)

5.  在**参数设置**页面，输入规则入参的阈值，单击**下一步**。

    ![标签-1](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/8479670061/p86602.png)

    **说明：** 规则触发机制、关联资源和入参名称均采用默认值。

6.  在**修正设置**页面，**修正执行方式**默认为**不执行修正**，单击**提交**。

    如果您需要为当前规则绑定修正模板，请参见[设置自动修正](/cn.zh-CN/资源合规审计/修正设置/设置自动修正.md)或[设置手动修正](/cn.zh-CN/资源合规审计/修正设置/设置手动修正.md)。

7.  查看规则新建结果。

    在**完成**页面，您可以查看规则新建结果。

    -   单击**查看规则详情**，您可以查看当前规则的**规则详情**和**修正详情**。
    -   单击**返回规则列表**，您可以在**管理合规规则**列表中查看该规则，规则状态为**应用中**。

## 通过函数计算新建规则

您可以在函数计算服务中自定义规则函数，请参见[使用函数计算新建规则](/cn.zh-CN/资源合规审计/自定义规则/使用函数计算新建规则.md)。

1.  登录[配置审计控制台](https://config.console.aliyun.com)。

2.  在左侧导航栏，选择**管理合规规则**。

3.  在**管理合规规则**页面，单击**新建规则**。

4.  在**基本设置**页面，选择**规则配置方式**为**通过函数计算**，输入**规则名称**，选择**函数Arn**和**风险等级**，单击**下一步**。

    ![基本设置-通过函数计算](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/8356280061/p92989.png)

    请确保您已在函数计算中新建函数，才能直接选择函数，否则请单击**前往创建新的函数**链接，在函数计算控制台上新建函数，操作方法请参见[新建函数](https://help.aliyun.com/document_detail/73338.html)。

5.  在**参数设置**页面，选择规则触发机制和规则关联资源，根据所需设置规则参数，单击**下一步**。

    ![监控设置-通过函数计算](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/4146280061/p92993.png)

    -   选择规则关联的资源后，规则将监听您账号下该资源类型的所有资源。一条规则可以关联多个资源类型。
    -   输入**规则入参名称**和**阈值**，入参名称需要与资源实际的配置名称一致。
6.  在**修正设置**页面，**修正执行方式**默认为**不执行修正**，单击**提交**。

    如果您需要为当前规则绑定修正模板，请参见[设置自动修正](/cn.zh-CN/资源合规审计/修正设置/设置自动修正.md)或[设置手动修正](/cn.zh-CN/资源合规审计/修正设置/设置手动修正.md)。

7.  查看规则新建结果。

    在**完成**页面，您可以查看规则新建结果。

    -   单击**查看规则详情**，您可以查看当前规则的**规则详情**和**修正详情**。
    -   单击**返回规则列表**，您可以在**管理合规规则**列表中查看该规则，规则状态为**应用中**。

## 通过可视化编辑器新建规则

1.  登录[配置审计控制台](https://config.console.aliyun.com)。

2.  在左侧导航栏，选择**管理合规规则**。

3.  在**管理合规规则**页面，单击**新建规则**。

4.  在**基本设置**页面，选择**规则配置方式**为**通过可视化编辑器**，输入**规则名称**，选择**风险等级**，单击**下一步**。

    ![通过可视化编辑器新建规则](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/4146280061/p96932.png)

5.  在**参数设置**页面，选择规则触发机制、规则关联资源和规则入参，单击**下一步**。

    ![通过可视化编辑器新建规则-调度设置](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9510770061/p111563.png)

    -   选择规则关联的资源后，规则将监听您账号下该资源类型的所有实体资源。一条规则可以关联一个资源类型。
    -   选择**规则入参名称**、**关系**和**阈值**。
6.  在**修正设置**页面，**修正执行方式**默认为**不执行修正**，单击**提交**。

    如果您需要为当前规则绑定修正模板，请参见[设置自动修正](/cn.zh-CN/资源合规审计/修正设置/设置自动修正.md)或[设置手动修正](/cn.zh-CN/资源合规审计/修正设置/设置手动修正.md)。

7.  查看规则新建结果。

    在**完成**页面，您可以查看规则新建结果。

    -   单击**查看规则详情**，您可以查看当前规则的**规则详情**和**修正详情**。
    -   单击**返回规则列表**，您可以在**管理合规规则**列表中查看该规则，规则状态为**应用中**。


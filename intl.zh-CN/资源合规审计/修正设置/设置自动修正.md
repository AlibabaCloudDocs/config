# 设置自动修正

您可以在新建规则时，为其绑定修正模板，且设置为自动执行。当资源配置出现不合规时，可以快速自动运行模板，修正资源配置。

本文以新建托管规则**检测资源是否已有必备标签**为例，为您介绍设置自动修正的操作方法。

托管规则**检测资源是否已有必备标签**用于检测关联资源是否绑定指定标签。例如，您需要所有ECS实例均绑定标签“Project=A”，您可以通过规则**检测资源是否已有必备标签**监控所有ECS实例，当配置审计发现有ECS实例未绑定该标签时，该规则评估结果为**不合规**。如果您订阅了资源合规事件，则配置审计会向您指定的消息服务MNS主题发送不合规通知，操作方法请参见[发送资源事件到消息服务MNS](/intl.zh-CN/订阅资源事件/发送资源事件到消息服务MNS.md)。

1.  登录[配置审计控制台](https://config.console.aliyun.com)。

2.  在左侧导航栏，选择**管理合规规则**。

3.  在**管理合规规则**页面，单击**新建规则**。

4.  在**管理合规规则**页面，选择**规则配置方式**为**使用托管规则**，搜索并选中**检测资源是否已有必备标签**，选择该规则的风险等级，单击**下一步**。

    ![标签](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0465118061/p86601.png)

5.  在**参数设置**页面，输入标签Key和Value的阈值，单击**下一步**。

    ![标签-1](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0465118061/p86602.png)

    如果您需要检测多组标签，则可以依次填写Key和Value的阈值，最多支持检测6组标签。多组标签之间是与的关系，只有当目标资源同时绑定您配置的标签时，规则评估结果为**合规**。如果您需要实现或的关系，则请多次使用该托管规则新建多条规则。

    例如，您需要账号下所有资源均绑定标签“Project=A”，可以使用规则**检测资源是否已有必备标签**检测资源，当配置审计检测到资源未绑定该标签时，该规则评估结果为**不合规**。

    **说明：** 规则触发机制、关联资源和入参名称均采用默认值。

6.  在**修正设置**页面，选择修正设置的执行方式为**自动执行**，在**修正模板**的下拉列表中选择对应的默认官方模板，根据界面引导完成服务授权，并填写资源属性的期望值，单击**提交**。

    ![修正设置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1175118061/p94789.png)

7.  查看修正结果。

    当该条规则被评估为**不合规**时，配置审计触发修正模板运行，自动将资源配置修改为您预设的期望值。

    -   在**管理合规规则**列表中查看
        1.  在**管理合规规则**页面，筛选出**合规评估情况**为**不合规**的规则。
        2.  单击目标规则对应**操作**列的**详情**或**规则名称/规则Id**链接。
        3.  单击**修正详情**页签，您可以查看具体的修正设置和修正历史。
    -   在**查看全局资源**中查看
        1.  在左侧导航栏，选择**查看全局资源**。
        2.  在**资源列表**页面，通过筛选或搜索功能找到不合规的资源。
        3.  单击**资源ID/资源名称**链接，在**资源信息**页签，查看资源的最新审计结果。
        4.  在**最新审计结果**区域，单击目标规则的**规则名称**链接，跳转到目标规则的**规则详情**页签。
        5.  单击**修正详情**页签，您可以查看具体的修正设置和修正历史。
    **说明：**

    -   如果修改修正模板的参数后重新保存，则执行结果和历史记录会被清零。
    -   修改修正模板的执行方式不影响执行结果和历史记录。

